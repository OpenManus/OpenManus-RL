#!/usr/bin/env python3
"""
Create a dummy dataset for environment-based training in OpenManus-RL.
This allows the framework to initialize without requiring actual training data,
as the environments will generate prompts dynamically.
"""

import os
import sys

# Check if pandas is available
try:
    import pandas as pd
    import pyarrow.parquet as pq
except ImportError:
    print("Error: pandas and pyarrow are required. Please install them:")
    print("  pip install pandas pyarrow")
    sys.exit(1)

def create_dummy_dataset():
    """Create a minimal dummy dataset file for environment-based training."""
    
    # Create data directory if it doesn't exist
    os.makedirs('data/dummy', exist_ok=True)
    
    # Create a minimal dataset with one dummy entry
    # This satisfies the framework's requirement for a dataset file
    # The actual prompts will be generated by the environments
    dummy_data = {
        'prompt': [[{'role': 'user', 'content': 'dummy'}]],
        'data_source': ['webshop'],  # Set to 'webshop' for WebShop environment
        'ability': ['agent'],
        'reward_model': [{'style': 'rule', 'ground_truth': 'dummy'}],
        'extra_info': [{'dummy': True, 'index': 0}]  # Add index field
    }
    
    df = pd.DataFrame(dummy_data)
    
    # Save as parquet file
    output_path = 'data/dummy/empty.parquet'
    df.to_parquet(output_path, index=False)
    
    print(f"âœ“ Created dummy dataset at: {output_path}")
    print("\nYou can now use this in your training script:")
    print("  data.train_files=data/dummy/empty.parquet")
    print("  data.val_files=data/dummy/empty.parquet")
    print("\nThe environments will provide the actual prompts during training.")

if __name__ == "__main__":
    create_dummy_dataset()